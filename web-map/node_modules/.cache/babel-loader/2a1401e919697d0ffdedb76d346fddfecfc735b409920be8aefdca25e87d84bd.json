{"ast":null,"code":"import axios from 'axios';\nimport config from '../config/config';\nconst API_URL = config.API_AUTH_URL;\n\n/**\r\n * Service d'authentification - Utilise l'API identity-provider\r\n */\nconst authService = {\n  /**\r\n   * Inscription d'un nouvel utilisateur\r\n   */\n  register: async (email, password, firstname, lastname) => {\n    const response = await axios.post(`${API_URL}/register`, {\n      email,\n      password,\n      firstname,\n      lastname\n    });\n    return response.data;\n  },\n  /**\r\n   * Connexion d'un utilisateur\r\n   */\n  login: async (email, password) => {\n    const response = await axios.post(`${API_URL}/login`, {\n      email,\n      password\n    });\n    if (response.data.token) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  },\n  /**\r\n   * Déconnexion\r\n   */\n  logout: () => {\n    localStorage.removeItem('user');\n  },\n  /**\r\n   * Récupérer l'utilisateur courant depuis le localStorage\r\n   */\n  getCurrentUser: () => {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  },\n  /**\r\n   * Vérifier le statut de l'API (online/offline)\r\n   */\n  getStatus: async () => {\n    const response = await axios.get(`${API_URL}/status`);\n    return response.data;\n  },\n  /**\r\n   * Débloquer un utilisateur (pour les managers)\r\n   */\n  unblockUser: async email => {\n    const response = await axios.post(`${API_URL}/unblock`, {\n      email\n    });\n    return response.data;\n  },\n  /**\r\n   * Rafraîchir le cache de connectivité\r\n   */\n  refreshConnectivity: async () => {\n    const response = await axios.post(`${API_URL}/refresh-connectivity`);\n    return response.data;\n  }\n};\nexport default authService;","map":{"version":3,"names":["axios","config","API_URL","API_AUTH_URL","authService","register","email","password","firstname","lastname","response","post","data","login","token","localStorage","setItem","JSON","stringify","logout","removeItem","getCurrentUser","user","getItem","parse","getStatus","get","unblockUser","refreshConnectivity"],"sources":["D:/L3/Mr Rojo/cloud/web-map/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\r\nimport config from '../config/config';\r\n\r\nconst API_URL = config.API_AUTH_URL;\r\n\r\n/**\r\n * Service d'authentification - Utilise l'API identity-provider\r\n */\r\nconst authService = {\r\n  /**\r\n   * Inscription d'un nouvel utilisateur\r\n   */\r\n  register: async (email, password, firstname, lastname) => {\r\n    const response = await axios.post(`${API_URL}/register`, {\r\n      email,\r\n      password,\r\n      firstname,\r\n      lastname\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Connexion d'un utilisateur\r\n   */\r\n  login: async (email, password) => {\r\n    const response = await axios.post(`${API_URL}/login`, {\r\n      email,\r\n      password\r\n    });\r\n    \r\n    if (response.data.token) {\r\n      localStorage.setItem('user', JSON.stringify(response.data));\r\n    }\r\n    \r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Déconnexion\r\n   */\r\n  logout: () => {\r\n    localStorage.removeItem('user');\r\n  },\r\n\r\n  /**\r\n   * Récupérer l'utilisateur courant depuis le localStorage\r\n   */\r\n  getCurrentUser: () => {\r\n    const user = localStorage.getItem('user');\r\n    return user ? JSON.parse(user) : null;\r\n  },\r\n\r\n  /**\r\n   * Vérifier le statut de l'API (online/offline)\r\n   */\r\n  getStatus: async () => {\r\n    const response = await axios.get(`${API_URL}/status`);\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Débloquer un utilisateur (pour les managers)\r\n   */\r\n  unblockUser: async (email) => {\r\n    const response = await axios.post(`${API_URL}/unblock`, { email });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Rafraîchir le cache de connectivité\r\n   */\r\n  refreshConnectivity: async () => {\r\n    const response = await axios.post(`${API_URL}/refresh-connectivity`);\r\n    return response.data;\r\n  }\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,kBAAkB;AAErC,MAAMC,OAAO,GAAGD,MAAM,CAACE,YAAY;;AAEnC;AACA;AACA;AACA,MAAMC,WAAW,GAAG;EAClB;AACF;AACA;EACEC,QAAQ,EAAE,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,KAAK;IACxD,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,GAAGT,OAAO,WAAW,EAAE;MACvDI,KAAK;MACLC,QAAQ;MACRC,SAAS;MACTC;IACF,CAAC,CAAC;IACF,OAAOC,QAAQ,CAACE,IAAI;EACtB,CAAC;EAED;AACF;AACA;EACEC,KAAK,EAAE,MAAAA,CAAOP,KAAK,EAAEC,QAAQ,KAAK;IAChC,MAAMG,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,GAAGT,OAAO,QAAQ,EAAE;MACpDI,KAAK;MACLC;IACF,CAAC,CAAC;IAEF,IAAIG,QAAQ,CAACE,IAAI,CAACE,KAAK,EAAE;MACvBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAACE,IAAI,CAAC,CAAC;IAC7D;IAEA,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC;EAED;AACF;AACA;EACEO,MAAM,EAAEA,CAAA,KAAM;IACZJ,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC;EACjC,CAAC;EAED;AACF;AACA;EACEC,cAAc,EAAEA,CAAA,KAAM;IACpB,MAAMC,IAAI,GAAGP,YAAY,CAACQ,OAAO,CAAC,MAAM,CAAC;IACzC,OAAOD,IAAI,GAAGL,IAAI,CAACO,KAAK,CAACF,IAAI,CAAC,GAAG,IAAI;EACvC,CAAC;EAED;AACF;AACA;EACEG,SAAS,EAAE,MAAAA,CAAA,KAAY;IACrB,MAAMf,QAAQ,GAAG,MAAMV,KAAK,CAAC0B,GAAG,CAAC,GAAGxB,OAAO,SAAS,CAAC;IACrD,OAAOQ,QAAQ,CAACE,IAAI;EACtB,CAAC;EAED;AACF;AACA;EACEe,WAAW,EAAE,MAAOrB,KAAK,IAAK;IAC5B,MAAMI,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,GAAGT,OAAO,UAAU,EAAE;MAAEI;IAAM,CAAC,CAAC;IAClE,OAAOI,QAAQ,CAACE,IAAI;EACtB,CAAC;EAED;AACF;AACA;EACEgB,mBAAmB,EAAE,MAAAA,CAAA,KAAY;IAC/B,MAAMlB,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,GAAGT,OAAO,uBAAuB,CAAC;IACpE,OAAOQ,QAAQ,CAACE,IAAI;EACtB;AACF,CAAC;AAED,eAAeR,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}